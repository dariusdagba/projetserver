---Exercice1---
SET SERVEROUTPUT ON
DECLARE
 Numero NUMBER(4) := 1;
Nom VARCHAR2(20) := 'TOTO';
BEGIN
DBMS_OUTPUT.PUT_LINE('Le numero est: '||numero||' Et le nom:
'||nom);
END;

--Exercice2---
CREATE TABLE ETUDES( code VARCHAR2(20), nom VARCHAR2(20), PRIMARY KEY(code));

INSERT INTO ETUDES VALUES('A1','ERIC');
INSERT INTO ETUDES VALUES('B1','NARITA');
INSERT INTO ETUDES VALUES('C1','ANAS');

SET SERVEROUTPUT ON
DECLARE
v_nom VARCHAR2(20);
BEGIN
    SELECT nom INTO v_nom FROM ETUDES WHERE code='C1';
    DBMS_OUTPUT.PUT_LINE('NOM : '||v_nom);
END;

--Exercice3--
SET SERVEROUTPUT ON
DECLARE
    T_etudes etudes%ROWTYPE;
BEGIN
Select code, nom into T_etudes from etudes where code='C1';
DBMS_OUTPUT.PUT_LINE('CODE : '||T_etudes.code||' NOM : '||T_etudes.nom);
END;

--Exercice4---

CREATE TABLE ACTEUR(numacteur VARCHAR2(10), nom VARCHAR2(40),prenom VARCHAR2(50), PRIMARY KEY(numacteur));
CREATE TABLE FILMS(numfilm VARCHAR2(10), titre VARCHAR2(40),metteur VARCHAR2(50),numreal VARCHAR2(10), PRIMARY KEY(numfilm));
CREATE TABLE FILMSJOUES(numacteur VARCHAR2(10), numfilm VARCHAR2(10),role VARCHAR2(50), PRIMARY KEY(numacteur,numfilm));
CREATE TABLE REALISATEUR(numreal VARCHAR2(10), nom VARCHAR2(40),prenom VARCHAR2(50), PRIMARY KEY(numreal));
CREATE TABLE CINEMA(numcinema VARCHAR2(10), nom VARCHAR2(40),adresse VARCHAR2(50), ville VARCHAR2(40),province VARCHAR2(40),pays VARCHAR2(40),codepostal VARCHAR2(40), PRIMARY KEY(numcinema));
CREATE TABLE AFFICHE(numfilm VARCHAR2(10), numcinema VARCHAR2(10),dateparue date, PRIMARY KEY(numfilm,numcinema));

ALTER TABLE FILMS ADD CONSTRAINT fk_films_real FOREIGN KEY(numreal)REFERENCES REALISATEUR(numreal);
ALTER TABLE FILMSJOUES ADD CONSTRAINT fk_filmjoues_act FOREIGN KEY(numacteur)REFERENCES ACTEUR(numacteur);
ALTER TABLE FILMSJOUES ADD CONSTRAINT fk_filmjous_film FOREIGN KEY(numfilm)REFERENCES FILMS(numfilm);
ALTER TABLE AFFICHE ADD CONSTRAINT fk_aff_film FOREIGN KEY(numfilm)REFERENCES FILMS(numfilm); 
ALTER TABLE AFFICHE ADD CONSTRAINT fk_aff_cinema FOREIGN KEY(numcinema)REFERENCES FILMS(numcinema);


INSERT INTO ACTEUR VALUES('ACT001','NIKO','JACK');
INSERT INTO ACTEUR VALUES('ACT002','JASS','IBA');

INSERT INTO REALISATEUR VALUES('REAL001','PLANTE','JASMIN');
INSERT INTO REALISATEUR VALUES('REAL002','DOV','ALMO');

INSERT INTO FILMS VALUES('FILM001','LE PIRATE','JOHN B','REAL001');
INSERT INTO FILMS VALUES('FILM002','LE PRINCE','JOHN B','REAL001');
INSERT INTO FILMS VALUES('FILM003','LA PARADE','JOE L','REAL002');

INSERT INTO FILMSJOUES VALUES('ACT001','FILM001','PIRATE');
INSERT INTO FILMSJOUES VALUES('ACT001','FILM002','PRINCE');
INSERT INTO FILMSJOUES VALUES('ACT002','FILM003','VENDEUSE');

INSERT INTO CINEMA VALUES('CINE001','VUE','1212 VERT','MTL','QC','CANADA','J2E 1T3');
INSERT INTO CINEMA VALUES('CINE002','ECRAN','2222 PLAT','LON','QC','CANADA','L2V 1R4');


INSERT INTO AFFICHE VALUES('FILM001','CINE001',to_date('12/12/2015','DD/MM/YYYY'));
INSERT INTO AFFICHE VALUES('FILM002','CINE001',to_date('23/12/2015','DD/MM/YYYY'));
INSERT INTO AFFICHE VALUES('FILM002','CINE002',to_date('23/12/2015','DD/MM/YYYY'));
INSERT INTO AFFICHE VALUES('FILM003','CINE002',to_date('25/12/2015','DD/MM/YYYY'));


SET SERVEROUTPUT ON
DECLARE
v_nom ACTEUR.nom%Type;
v_prenom ACTEUR.prenom%Type;
BEGIN
    SELECT nom,prenom INTO v_nom,v_prenom FROM ACTEUR JOIN FILMSJOUES ON FILMSJOUES.numacteur=ACTEUR.numacteur 
    JOIN FILMS ON FILMS.numfilm=FILMSJOUES.numfilm 
    WHERE titre='LE PIRATE' AND role='PIRATE';
    DBMS_OUTPUT.PUT_LINE('NOM : '||v_nom||' PRENOM : '||v_prenom);
END;




